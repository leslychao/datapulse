<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.23.xsd">

  <changeSet id="010-fact-sales" author="vkim">
    <sql>
      create table if not exists fact.sales (
        id bigserial primary key,
        marketplace text not null,
        shop_id text not null,
        sku text not null,
        event_time timestamptz not null,
        quantity int not null,
        revenue numeric(18,2) not null
      );
      create unique index if not exists uq_fact_sales
        on fact.sales(marketplace, shop_id, sku, event_time);
      create index if not exists ix_fact_sales_time on fact.sales(event_time desc);
    </sql>
  </changeSet>
</databaseChangeLog>
